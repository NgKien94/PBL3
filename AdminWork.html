
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Management Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@icon/entypo@1.0.3/entypo.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!--
        
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    -->
    
     <link rel="stylesheet" href="./asset/css/AdminWork.css" />
</head>
<body>
       <div class="myheadeer bg-white">
        <div class="container bg-white">
            <div class="row">
                <div class="col-md-2 py-2">
                    <img src="./asset/image/Logo.png"  class="image-fluid " alt="logo" style="width: 150px;height: 50px;object-fit: contain;">
                </div>
                <div class="col-md-2 ">
                   <div class="row">
                    <div class="col-md-3 py-4 fs-5" ><i class="fa-brands fa-square-x-twitter"></i></div>
                    <div class="col-md-3 py-4 fs-5" ><i class="fa-brands fa-youtube" style="color: red;"></i></div>
                    <div class="col-md-3 py-4 fs-5"><i class="fa-brands fa-instagram" style="color: rgb(233, 19, 119);"></i></div>
                   </div>
                </div>
                <div class="col-md-6 py-3">
                   <form action="/Admins/Search" method="GET">
                    <div class="input-group mb-3">
                        <input type="text" class="form-control"  name="StringSearch" placeholder="Search user " aria-label="thong tin tim kiem " aria-describedby="basic-addon2">
                        <input type="hidden" class="form-control" name="Type" value="@type" >

                       <div class="form-group">
                            <input type="submit" value="Tìm kiếm" class="btn btn-dark" style="margin-left: 14px; font-weight: 700;"/>
                        </div>
                      </div>
                      </form>
                </div>
                
                
            </div>
        </div>
    </div>

     <section class="mymainslider m-3">
       <div class="container-fluid">
       <div class="container">
        <!--
        <div class="row">
            <div class="col-md-12">
                <div class="top-breadcrumb">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Basic Table</li>
                        </ol>
                    </nav>
                </div>
            </div>
        </div>
        -->
        <div class="row">
            <div class="col-lg-4 position-sticky">
                <div class="card left-profile-card position-sticky">
                    <div class="card-body">
                        <div class="text-center">
                            <img src="https://bootdey.com/img/Content/avatar/avatar2.png" alt="ảnh đại diện admin" class="user-profile" style="width: 160px;height: 160px;border-radius: 90px;">
                            <h4>Nguyen Quang Kien</h4>
                            <p style="font-weight: 800;">Admin website</p>
                            <div class="d-flex align-items-center justify-content-center mb-3">
                                <i class="fas fa-star text-info"></i>
                                <i class="fas fa-star text-info"></i>
                                <i class="fas fa-star text-info"></i>
                                <i class="fas fa-star text-info"></i>
                                <i class="fas fa-star text-info"></i>
                            </div>
                        </div>
                        <div class="personal-info">
                            
                            <ul class="personal-list">
                                <li><i class="fas fa-briefcase "></i><span>Web Designer</span></li>
                                <li><i class="fa-solid fa-envelope"></i><span>@ViewBag.Email </span></li>
                                <li><i class="fas fa-mobile "></i><span>@ViewBag.Phone</span></li>
                            </ul>
                               <button id="btn3" class="btn btn-dark"><a class="nav-link text-white" asp-area="Admins" asp-controller="Admins" asp-action="Logout" >Logout <i class="fa-solid fa-right-from-bracket"></i> </a></button>
                                <button id="btn3" class="btn btn-dark"><a class="nav-link text-white" asp-area="Admins" asp-controller="Admins" asp-action="History" >Work history<i class="fa-solid fa-clock-rotate-left"></i> </a></button>
                        </div>
                        <div class="skill">
                           
                        </div>
                        <div class="languages">
                           
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-8">
                <div class="card right-profile-card">
                    <div class="card-header alert-primary">
                        <ul class="nav nav-pills" id="pills-tab" role="tablist">
                            <li class="nav-item">
                              <button id="btn1" ><a class="nav-link text-white" asp-area="Admins" asp-controller="Admins" asp-action="QuanliUser" asp-route-id="@id">Quản lí User</a></button>
                            </li>
                            <li class="nav-item">
                               <button id="btn2" ><a class="nav-link text-white" asp-area="Admins" asp-controller="Admins" asp-action="QuanliPost" asp-route-id="@id">Quản lí Post</a></button>
                            </li>
                            <li class="nav-item">
                               <button id="btn3"><a class="nav-link text-white" asp-area="Admins" asp-controller="Admins" asp-action="ThongBao" asp-route-id="@id">Thông Báo</a></button>
                            </li>
                        

                        </ul>
                    </div>

                    <div class="card-body">
                        <div class="tab-content" id="pills-tabContent">
                            <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                              
                            </div>
                            <div class="tab-pane fade" id="pills-education" role="tabpanel">
                                
                             

                            </div>
                            <div class="tab-pane fade" id="pills-timeline" role="tabpanel">
                                <div class="row">
                                    
                                </div>
                            </div>


                        </div>
                    </div>

                <div id="div1" class="container" style="display: block;">
                     @RenderBody()
                <div class="overlayout" id="overlayout" onclick="resetUpdateForm()"></div>
                <div id="update-form-container" style="display: none;">
                    <div  class="form-update"  >
                        
                       
                        <div class="form-group">
                            <label for="yearofbirth">Thời gian bị hạn chế :</label>
                            <div id="divtime">
                                <h4 id="time"></h4>
                            </div>
                            <input id="tghc" class="form-control" name="yearofbirth"
                                style="width: 400px; height: 40px; border-color: black; " type="date" value="" required>
                        </div>
                       
                        <button id="btnconfirm"  class="btn btn-primary" >CONFIRM</button>
                    </div>
                </div>

                 <div class="overlayouts" id="overlayouts" onclick="resetUpdateForm1()"></div>
                <div id="update-form-containers" style="display: none;">
                    <div method="post" class="form-update" >
                        <div class="form-group">
                            <label for="yearofbirth">Email cũ :</label>
                            <div id="divtime">
                                <h4 id="emailad"></h4>
                            </div>
                            <label for="email"> Email :</label>
                            <input id="emaila" class="form-control"  name="email"
                                style="width: 400px; height: 40px; border-color: black;" type="text" value="" required>
                        </div>

                        <div class="form-group">
                            <label for="yearofbirth">Tên đăng nhập cũ :</label>
                            <div id="divtime">
                                <h4 id="namead"></h4>
                            </div>
                            <label for="customername">Tên đăng nhập :</label>
                            <input id="namea" class="form-control" name="customername"
                                style="width: 400px; height: 40px; border-color: black; " type="text" value="" required>
                        </div>
                        <div class="form-group">
                            <label for="yearofbirth">Ngày sinh :</label>
                            <div id="divtime">
                                <h4 id="timea"></h4>
                            </div>
                            <label for="yearofbirth">Ngày sinh mới :</label>
                            <input id="date" class="form-control" name="yearofbirth"
                                style="width: 400px; height: 40px; border-color: black; " type="date" value="" required>
                        </div>
                        <div class="form-group">
                            <label for="oldpass">Mật khẩu cũ:</label>
                            <input id="passold" class="form-control" name="oldpass"
                                style="width: 400px; height: 40px; border-color: black;" type="password" value=""
                                required>
                        </div>
                        <div class="form-group">
                            <label for="newpass">Mật khẩu mới:</label>
                            <input id="pass" class="form-control" name="newpass"
                                style="width: 400px; height: 40px; border-color: black;" type="password" value=""
                                required>
                        </div>

                        <button id="btnconfirm1"  class="btn btn-primary">CONFIRM</button>
                        <div id="err" style="display: none;">
                                <h3 id="errpass" style="color: red;">Mật khẩu không đúng</h3>
                            </div>
                    </div>
                </div>
                     
                </div>
                <div id="div2" class="container" style="display: none;">
                     <h1>div2</h1>


                </div>
                <div id="div3" class="container" style="display: none;">
                     <h1>div3</h1>

                </div>
                </div>
            </div>
        </div>
    </div>

       
     </div>
    </section>
    <footer>
        <div class="img-footer">
            <img src="/asset/image/Logo.png" alt="Icon ứng dụng footer" style="width: 120px;height: 100px;object-fit: contain;">
            <h5 style="font-weight: 800;">Free - Modern - Formal</h5>
        </div>
        <div class="footer-Part1">
            <div>PBL3 - Software Engineering</div>
            <div>Social Network Website Development</div>
            <div>Instructor: Nguyễn Văn Hiệu</div>
            <div>Number of Members: 4</div>
            <div>Front End: Quang Kiên, Công Minh</div>
            <div>Back End: Thành An, Bá Hưng</div>
        </div>
        
        <div class="footer-Part2">
            <div>Programming Language: C#, HTML, CSS, Javascript</div>
            <div>Database: MySQL</div>
            <div>Technologies Used: ASP.Net, Bootstrap</div>
            <div>Completion Date: 6/2024</div>
        </div>
        
        <div class="footer-Part3">
            <div>Da Nang University of Science and Technology</div>
            <div>54 Nguyễn Lương Bằng Street</div>
            <div> Liên Chiểu District, Da Nang City</div>
        </div>
        
    </footer>
    
    <section class="Application">
       <h1><i class="fa-brands fa-twitter fa-sm"></i></h1>
       <h1><i class="fa-brands fa-facebook fa-sm"></i></h1>
       <h1><i class="fa-brands fa-square-instagram fa-sm"></i></h1>
       <h1><i class="fa-brands fa-whatsapp fa-sm"></i></h1>
    </section>
     
  
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>


    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <!--
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    -->
    <script>
       
        function showUpdateForm() {
    // Ẩn đi các trường nhập dữ liệu cũ (nếu có)
           
            resetUpdateForm();
            var overlay = document.getElementById("overlayout");
            var updateFormContainer = document.getElementById("update-form-container");
            overlay.style.display = "block"; // Hiển thị overlay
            updateFormContainer.style.display = "block"; // Hiển thị update-form-container
        }
        function hideUpdateForm() {
            // Ẩn đi các trường nhập dữ liệu cũ (nếu có)
            resetUpdateForm();
            var overlay = document.getElementById("overlayout");
            var updateFormContainer = document.getElementById("update-form-container");
            overlay.style.display = "none"; // Ẩn đi overlay
            updateFormContainer.style.display = "none"; // Ẩn đi update-form-container
        }
        function resetUpdateForm() {
            var overlay = document.getElementById("overlayout");
            var formUpdateContainer = document.getElementById("update-form-container");

            // Select the input elements by their class or ID and set their values to empty strings
          
           
            var yearofbirthInput = document.querySelector('.form-update [name="yearofbirth"]');
           

            // Set values to empty strings
          
            yearofbirthInput.value = "";
           

            // Hide the form and overlay
            overlay.style.display = "none";
            formUpdateContainer.style.display = "none";
        }
          function showUpdateForm1() {
    // Ẩn đi các trường nhập dữ liệu cũ (nếu có)
           
            resetUpdateForm1();
            var overlay = document.getElementById("overlayouts");
            var updateFormContainer = document.getElementById("update-form-containers");
            overlay.style.display = "block"; // Hiển thị overlay
            updateFormContainer.style.display = "block"; // Hiển thị update-form-container
        }
        function hideUpdateForm1() {
            // Ẩn đi các trường nhập dữ liệu cũ (nếu có)
            resetUpdateForm1();
            var overlay = document.getElementById("overlayouts");
            var updateFormContainer = document.getElementById("update-form-containers");
            overlay.style.display = "none"; // Ẩn đi overlay
            updateFormContainer.style.display = "none"; // Ẩn đi update-form-container
        }
        function resetUpdateForm1() {
            var overlay = document.getElementById("overlayouts");
            var formUpdateContainer = document.getElementById("update-form-containers");

            // Select the input elements by their class or ID and set their values to empty strings
          
           
        var emailInput = document.querySelector('.form-update #emaila');
        var customernameInput = document.querySelector('.form-update [name="customername"]');
        var yearofbirthInput = document.querySelector('.form-update [name="yearofbirth"]');
        var oldpassInput = document.querySelector('.form-update [name="oldpass"]');
        var newpassInput = document.querySelector('.form-update [name="newpass"]');

        // Set values to empty strings
        emailInput.value = "";
        customernameInput.value = "";
        yearofbirthInput.value = "";
        oldpassInput.value = "";
        newpassInput.value = "";
           

            // Hide the form and overlay
            overlay.style.display = "none";
            formUpdateContainer.style.display = "none";
        }
        function getFormattedDate(date) {
                let year = date.getFullYear();
                let month = (1 + date.getMonth()).toString().padStart(2, '0');
                let day = date.getDate().toString().padStart(2, '0');
            
                return month + '/' + day + '/' + year;
            }
                    
       var iduser;
       var gete;
        $('.btnuser').on("click",function(e){
            var bnt = $(this);
            
             gete = $(this);

            iduser = bnt.data('iduser');
           //  time = bnt.data('time');
             console.log(iduser);
             //console.log(time);

               $.ajax({
            url: "QuanliUser/GetData",
            data : {id:iduser},
             method: "GET",
             dataType: "json",
            //type : JSON,
            //contentType : "application/json;charset=utf-8",

            success : function(response){
                console.log(response.tg);
              
                $('#time').text(response.tg);
            },
         
            });
            

        });

        $('.btn-active').off("click").on("click",function(e){
            e.preventDefault();
            var btn = $(this);
            var id = btn.data('id');
           
            $.ajax({
            url: "ChangeStatus",
            data : {id:id},
             method: "POST",
             dataType: "json",
            //type : JSON,
            //contentType : "application/json;charset=utf-8",

            success : function(response){
                console.log(response);
                if(response.status == true){
                    btn.text("kich hoat");
                }
                else {
                    btn.text("khoa");

                }
            
            },
         
            });
        });
      

         $('#btnconfirm').on("click",function(){
            var tghc = $('#tghc').val();
            console.log(tghc);
             var obj = {id : iduser, tg : tghc};
            $.ajax({
            url: "QuanliUser/ChangeLimit",
            data : {id:iduser,tg : tghc},
             method: "POST",
             dataType: "json",
            //type : JSON,
            //contentType : "application/json;charset=utf-8",

            success : function(response){
                console.log(response.tg);
                //$('.btn-active').data('time',tghc);
                //tghc = tghc.format("MM/dd/yyyy");
               hideUpdateForm();
             
            
            },
            error : function(err){
                console.log(err)
            }
         
            });
        });
        $('#btn4').on("click",function(){
            console.log(0);
            var obj = {id : 0};
            var id = 0;
              $.ajax({
            url: "GetInfor",
            data : {id:id},
             method: "GET",
             dataType: "json",
            //type : JSON,
            //contentType : "application/json;charset=utf-8",

            success : function(response){
                console.log(response.email + " "  + response.ten + " " + response.ngaysinh);
              
               $('#emailad').text(response.email); 
               $('#namead').text(response.ten); 
               $('#timea').text(response.ngaysinh); 
              showUpdateForm1();
            },
         
            });
        });
         $('#btnconfirm1').on("click",function(){
            var id = 0;
            var email = $('#emaila').val();
            var ten = $('#namea').val();
            var ns = $('#date').val();
            var passold = $('#passold').val();
            var pass = $('#pass').val();
            console.log("infor : " + email + " " + ten + " " + ns + " " + passold + " " + pass);
             var obj = {email : email, ten : ten, ngaysinh : ns,passold : passold,pass : pass};
            $.ajax({
            url: "ChangeInfor",
            data : {id : id,email : email, ten : ten, ngaysinh : ns,passold : passold,pass : pass},
             method: "POST",
             dataType: "json",
            //type : JSON,
            //contentType : "application/json;charset=utf-8",

            success : function(response){
                console.log(response.status);
                //$('.btn-active').data('time',tghc);
                //tghc = tghc.format("MM/dd/yyyy");
                if(response.status == true){
                    console.log("oke");
                    $('#err').attr("style", "display:none");

                     hideUpdateForm1();
                }
                else{
                    console.log("not oke");
                    $('#err').attr("style", "display:block");
                }
               
             
            
            },
            error : function(err){
                console.log(err)
            }
         
            });
        });
    </script>
    <script src="~/js/site.js" asp-append-version="true"></script>
</body>
</html>
